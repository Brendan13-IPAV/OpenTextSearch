<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Enforcement Options</title>
    <style>
        /* Base styles */
        :root {
            --dark-blue: #1D2939;
            --teal: #55ABC9;
            --light-mint: #F6FAFC;
            --border-color: #E4E7EC;
            --text-primary: #1D2939;
            --text-secondary: #667085;
            --highlight: #787ABB;
            
            /* IP-specific colours */
            --patent-color: #1DA7AF;
            --trademark-color: #DE4326;
            --design-color: #84C98F;
            --pbr-color: #F1AC1E;
            --copyright-color: #787ABB;
            --all-rights-color: #667085;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: var(--text-primary);
            background-color: var(--light-mint);
            line-height: 1.5;
            margin: 0;
            padding: 0;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
            color: var(--teal);
            margin-top: 0;
        }

        h2 {
            font-size: 22px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 20px;
            margin-top: 0;
        }

        h3 {
            font-size: 18px;
            font-weight: 600;
            margin-top: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header styling */
        .header {
            background-color: var(--dark-blue);
            color: white;
            padding: 15px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 22px;
            font-weight: 600;
        }

        .nav a {
            color: white;
            text-decoration: none;
            margin-left: 30px;
        }

        .main-content {
            padding: 40px 0;
        }

        .title-section {
            margin-bottom: 40px;
            padding: 0 20px;
        }

        /* Two-column form layout */
        .form-layout {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .form-left, .form-right {
            flex: 1;
        }
        
        .description-textarea {
            height: 100%;
            min-height: 300px;
        }

        /* Card styling */
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
            padding: 24px;
            margin-bottom: 20px;
            border-left: 3px solid var(--teal);
            transition: transform 0.2s ease, opacity 0.3s ease;
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 6px rgba(16, 24, 40, 0.1);
        }

        .card-title {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .relevancy-score {
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Form elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 16px;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--teal);
            box-shadow: 0 0 0 3px rgba(85, 171, 201, 0.15);
        }

        /* Buttons */
        .btn {
            padding: 10px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background-color: var(--teal);
            color: white;
        }

        .btn-primary:hover {
            background-color: #4799B5;
        }

        .btn-secondary {
            background-color: white;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .btn-edit {
            background-color: var(--teal);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            display: inline-block;
        }

        /* Layout classes */
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }
        
        .results-container {
            display: none;
        }
        
        .prompt-container {
            display: block;
        }

        /* Guide text styling */
        .guide-text-container {
            background-color: #F8F9FB;
            border-radius: 6px;
            padding: 16px;
            margin: 20px 0;
            border-left: 3px solid var(--text-secondary);
            transition: all 0.3s ease;
        }
        
        .guide-text-container.active {
            background-color: #EBF5FF;
            border-left-color: var(--teal);
        }
        
        .guide-text {
            color: var(--text-secondary);
            font-style: italic;
            margin: 0;
            transition: color 0.3s ease;
        }
        
        .guide-text-container.active .guide-text {
            color: var(--text-primary);
        }
        
        .guide-text-title {
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        /* Results page styling */
        .filters-panel {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
        }
        
        .sidebar {
            background-color: #F9FAFB;
            border-radius: 8px;
            padding: 20px;
            height: fit-content;
            box-shadow: 0 1px 3px rgba(16, 24, 40, 0.1);
            border-left: 3px solid var(--teal);
        }
        
        .card-overtitle {
            text-transform: uppercase;
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .feature-tag {
            display: inline-block;
            background-color: #EBF5FF;
            color: var(--teal);
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            margin-right: 8px;
            margin-bottom: 5px;
        }
        
        /* IP-specific styling */
        .tag-Patent {
            background-color: rgba(29, 167, 175, 0.15);
            color: var(--patent-color);
        }
        
        .tag-Trade-mark,
        .tag-Unregistered-trade-mark {
            background-color: rgba(222, 67, 38, 0.15);
            color: var(--trademark-color);
        }
        
        .tag-Design {
            background-color: rgba(132, 201, 143, 0.15);
            color: var(--design-color);
        }
        
        .tag-Plant-breeder {
            background-color: rgba(241, 172, 30, 0.15);
            color: var(--pbr-color);
        }
        
        .tag-Copyright {
            background-color: rgba(120, 122, 187, 0.15);
            color: var(--copyright-color);
        }
        
        .tag-All,
        .tag-Other {
            background-color: rgba(102, 112, 133, 0.15);
            color: var(--all-rights-color);
        }
        
        /* Card border colors by IP type */
        .card-Patent {
            border-left-color: var(--patent-color);
        }
        
        .card-Trade-mark,
        .card-Unregistered-trade-mark {
            border-left-color: var(--trademark-color);
        }
        
        .card-Design {
            border-left-color: var(--design-color);
        }
        
        .card-Plant-breeder {
            border-left-color: var(--pbr-color);
        }
        
        .card-Copyright {
            border-left-color: var(--copyright-color);
        }
        
        .card-All,
        .card-Other {
            border-left-color: var(--all-rights-color);
        }
        
        /* Card animation */
        @keyframes cardAppear {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .card-animated {
            animation: cardAppear 0.4s ease forwards;
            opacity: 0;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .two-column {
                grid-template-columns: 1fr;
            }
            .form-layout {
                flex-direction: column;
            }
            .header-content {
                flex-direction: column;
                gap: 10px;
            }
            .nav a {
                margin-left: 15px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">IP Enforcement Options</div>
                <nav class="nav">
                    <a href="#">Home</a>
                    <a href="#">About</a>
                    <a href="#">Resources</a>
                </nav>
            </div>
        </div>
    </header>

    <div class="container main-content">
        <!-- Initial Prompt Form -->
        <div class="prompt-container" id="promptContainer">
            <div class="title-section">
                <h1>IP Enforcement Options</h1>
                <h2>Helping you find relevant information for your situation</h2>
                <p>This tool is designed to support people exploring enforcement, protection and managment options for intellectual property (IP).</p>
            </div>
            
            <div class="card">
                <form id="situationForm">
                    <div class="form-layout">
                        <div class="form-left">
                            <div class="form-group">
                                <label class="form-label" for="situation">Select the option that best describes your current situation.</label>
                                <select class="form-control" id="situation" required>
                                    <option value="" selected disabled>-select-</option>
                                    <option value="infringement">I believe my IP has been infringed</option>
                                    <option value="accused">I've been accused of infringement</option>
                                    <option value="protection">I am considering my future options</option>
                                    <option value="conflict">I've discovered a potential IP conflict or issue</option>
                                    <option value="challenge">I believe someone else's IP should not be granted</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="focus">What outcome are you seeking?</label>
                                <select class="form-control" id="focus" required>
                                    <option value="" selected disabled>-select-</option>
                                    <option value="understand">Understand if there's an issue to deal with</option>
                                    <option value="prevent_infringement">Stop current suspected infringement</option>
                                    <option value="support">Consider support from an IP professional</option>
                                    <option value="agreement">Explore ways to reach an IP agreement with someone</option>
                                    <option value="strengthen">Strategies to proactively protect my IP</option>
                                    <option value="prevent_harm">Prevent harm to the public</option>
                                    <option value="recoup">Obtain financial compensation related to suspected infringement</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="ipType">What type of IP is involved?</label>
                                <select class="form-control" id="ipType" required>
                                    <option value="" selected disabled>-select-</option>
                                    <option value="Trade mark (registered)">Registered trade mark</option>
                                    <option value="Patent">Patent</option>
                                    <option value="Design">Registered design</option>
                                    <option value="Plant breeder">Plant breeder's right</option>
                                    <option value="Unregistered trade mark">Unregistered trade mark or brand</option>
                                    <option value="Copyright">Copyright</option>
                                    <option value="Other">Other rights</option>
                                    <option value="Unsure">I'm not sure</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-right">
                            <div class="form-group">
                                <label class="form-label" for="description">Describe your situation</label>
                                <textarea class="form-control description-textarea" id="description" rows="11" placeholder="This helps us show you content that may be more relevant."></textarea>
                            </div>
                            
                            <!-- Dynamic guide text with title -->
                            <div class="guide-text-container" id="guideTextContainer">
                                <h4 class="guide-text-title">Example description and details you may include</h4>
                                <p class="guide-text" id="guideText">Select options above to see relevant examples...</p>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" id="exploreBtn">Explore options</button>
                </form>
            </div>
        </div>
        
        <!-- Results Page (initially hidden) -->
        <div class="results-container" id="resultsContainer">
            <div class="title-section">
                <h1>IP Enforcement Options</h1>
                <h2>Options that might be worth considering</h2>
            </div>
            
            <!-- Filters and description side by side -->
            <div class="form-layout">
                <div class="form-left">
                    <div class="filters-panel">
                        <div class="form-group">
                            <label class="form-label" for="situationFilter">What brings you here today?</label>
                            <select class="form-control" id="situationFilter">
                                <option value="accused">I've been accused of infringing someone else's IP</option>
                                <option value="infringement">I believe someone is using my IP without permission</option>
                                <option value="protection">I want to proactively protect my IP</option>
                                <option value="conflict">I've come across an IP conflict or issue</option>
                                <option value="challenge">I believe someone else's IP should not be granted</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="focusFilter">What would you like to focus on today?</label>
                            <select class="form-control" id="focusFilter">
                                <option value="understand">Understand if there's an issue to deal with</option>
                                <option value="strengthen">Strengthen my position</option>
                                <option value="support">Get support from a professional</option>
                                <option value="agreement">Explore ways to reach agreement with someone</option>
                                <option value="prevent_harm">Prevent harm to the public</option>
                                <option value="prevent_infringement">Prevent a potential infringement</option>
                                <option value="recoup">Recoup financial losses from another party</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="ipTypeFilter">What type of IP is involved?</label>
                            <select class="form-control" id="ipTypeFilter">
                                <option value="Trade mark (registered)">Registered trade mark</option>
                                <option value="Patent">Patent</option>
                                <option value="Design">Registered design</option>
                                <option value="Plant breeder">Plant breeder's right</option>
                                <option value="Unregistered trade mark">Unregistered trade mark or brand</option>
                                <option value="Copyright">Copyright</option>
                                <option value="Other">Other rights</option>
                                <option value="Unsure">I'm not sure</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-right">
                    <div class="sidebar">
                        <h3>Your description</h3>
                        <p id="userDescription"></p>
                        <button class="btn-edit" id="editDescription">Edit</button>
                    </div>
                </div>
            </div>
            
            <!-- Main results grid (now 3-column) -->
            <div class="grid" id="resultsGrid">
                <!-- Cards will be dynamically inserted here -->
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn btn-secondary" id="backButton">Back to form</button>
            </div>
        </div>
    </div>

    <script>

const guideTextData = [
    // Infringement + Understanding + Different IP types
    {
        "User Goal": "Understand if there's an issue to deal with",
        "IP Type": "Trade mark (registered)",
        "Situation": "infringement",
        "Guide Text": "I noticed a company is using a logo similar to my registered trade mark. Their product is in a related category to mine but not identical. I'm not sure if this counts as infringement or if I should take action. My business has been operating for 5 years, and we're based in Melbourne. Include any information about importation of goods and whether the similar mark appears online."
    },
    {
        "User Goal": "Understand if there's an issue to deal with",
        "IP Type": "Patent",
        "Situation": "infringement",
        "Guide Text": "A competitor has launched a product that uses a mechanism similar to my patented invention. Include any information about your relationship with the competitor and whether they have any IP rights of their own."
    },
    {
        "User Goal": "Understand if there's an issue to deal with",
        "IP Type": "Copyright",
        "Situation": "infringement",
        "Guide Text": "I found my photographs being used on another company's website without permission. They've cropped out my watermark. Include any information about whether this is occurring internationally and if you've had prior dealings with this company."
    },

    // Infringement + Strengthening + Different IP types
    {
        "User Goal": "Strengthen my position",
        "IP Type": "Trade mark (registered)",
        "Situation": "infringement",
        "Guide Text": "A new business has opened using a name very similar to my registered trade mark. I want to ensure I maintain strong protection. Include any information about their online presence and whether they have filed any trademark applications."
    },
    {
        "User Goal": "Strengthen my position",
        "IP Type": "Patent",
        "Situation": "infringement",
        "Guide Text": "I believe a product on the market infringes my patent, and I want to strengthen my position before addressing this with the manufacturer. Include any information about international aspects and whether the product is being sold online."
    },
    {
        "User Goal": "Strengthen my position",
        "IP Type": "Copyright",
        "Situation": "infringement",
        "Guide Text": "My copyrighted content is being shared on multiple websites. I need to strengthen my position before taking action. Include any information about whether the content is being modified and if the other parties claim any IP rights."
    },

    // Infringement + Professional Support + Different IP types
    {
        "User Goal": "Get support from a professional",
        "IP Type": "Trade mark (registered)",
        "Situation": "infringement",
        "Guide Text": "I need help from a professional about a company using a very similar trade mark to mine. Their products are appearing in the same retail stores as mine. Include any information about whether their products are imported and if you've had any prior relationship with this company."
    },
    {
        "User Goal": "Get support from a professional",
        "IP Type": "Patent",
        "Situation": "infringement",
        "Guide Text": "I need expert advice on addressing a potential patent infringement. A large company is using technology that appears to be covered by my patent. Include any information about whether they have IP rights of their own and any international aspects of the infringement."
    },
    {
        "User Goal": "Get support from a professional",
        "IP Type": "Copyright",
        "Situation": "infringement",
        "Guide Text": "I've discovered my software code has been copied into another application. I need professional help to address this. Include any information about how the software is distributed online and whether you've had any prior dealings with the developers."
    },

    // Infringement + Agreement + Different IP types
    {
        "User Goal": "Explore ways to reach agreement with someone",
        "IP Type": "Trade mark (registered)",
        "Situation": "infringement",
        "Guide Text": "A business is using a similar trade mark to mine in a different region. I'd like to explore a resolution rather than immediate legal action. Include any information about whether they have registered IP rights and if there's any overlap in your markets."
    },
    {
        "User Goal": "Explore ways to reach agreement with someone",
        "IP Type": "Patent",
        "Situation": "infringement",
        "Guide Text": "A smaller company may be using my patented technology. I'd prefer to reach a licensing agreement rather than pursue litigation. Include any information about your previous interactions with this company and whether they have complementary IP rights."
    },
    {
        "User Goal": "Explore ways to reach agreement with someone",
        "IP Type": "Copyright",
        "Situation": "infringement",
        "Guide Text": "An online content creator has adapted my copyrighted material. I'm interested in resolving this amicably. Include any information about the online platforms involved and whether the creator has added original content."
    },

    // Infringement + Prevent Harm + Different IP types
    {
        "User Goal": "Prevent harm to the public",
        "IP Type": "Trade mark (registered)",
        "Situation": "infringement",
        "Guide Text": "Someone is selling products using a mark similar to mine, but their products are of low quality and could be unsafe. I'm concerned about public safety and damage to my reputation. Include any information about whether these products are being imported and if they're sold through online marketplaces."
    },
    {
        "User Goal": "Prevent harm to the public",
        "IP Type": "Patent",
        "Situation": "infringement",
        "Guide Text": "A company is selling products that infringe my patented safety mechanism, but their implementation appears unsafe. I'm concerned about potential injuries. Include any information about whether they have their own IP rights and any prior communications you've had with them."
    },
    {
        "User Goal": "Prevent harm to the public",
        "IP Type": "Copyright",
        "Situation": "infringement",
        "Guide Text": "My medical guideline content has been copied but altered in ways that could lead to harmful medical advice. Include any information about the online distribution channels and whether the other party claims rights to their modifications."
    },

    // Infringement + Prevent Infringement + Different IP types
    {
        "User Goal": "Prevent a potential infringement",
        "IP Type": "Trade mark (registered)",
        "Situation": "infringement",
        "Guide Text": "I've learned of a company planning to launch a product with a name similar to my registered trade mark. I want to address this before they launch. Include any information about whether they've filed trademark applications and your relationship with the company."
    },
    {
        "User Goal": "Prevent a potential infringement",
        "IP Type": "Patent",
        "Situation": "infringement",
        "Guide Text": "I've seen a prototype demonstration that appears to use my patented technology. The product hasn't been commercialized yet. Include any information about whether you've had prior contact with the potential infringer and any international aspects."
    },
    {
        "User Goal": "Prevent a potential infringement",
        "IP Type": "Copyright",
        "Situation": "infringement",
        "Guide Text": "A publisher has announced a book with a synopsis very similar to my copyrighted work. It hasn't been released yet. Include any information about digital/online versions and whether you've had any prior dealings with this publisher."
    },

    // Infringement + Recoup Losses + Different IP types
    {
        "User Goal": "Recoup financial losses from another party",
        "IP Type": "Trade mark (registered)",
        "Situation": "infringement",
        "Guide Text": "A company has been using a mark similar to my registered trade mark for over a year, and I've lost significant business to them. Include any information about their online presence and whether they have any IP rights of their own."
    },
    {
        "User Goal": "Recoup financial losses from another party",
        "IP Type": "Patent",
        "Situation": "infringement",
        "Guide Text": "A major competitor has been using my patented process without permission, impacting my market share. Include any information about whether the infringement crosses international borders and any previous communications with the competitor."
    },
    {
        "User Goal": "Recoup financial losses from another party",
        "IP Type": "Copyright",
        "Situation": "infringement",
        "Guide Text": "My copyrighted training materials have been sold by another company, directly competing with my business. Include any information about online distribution and whether they've modified or mixed your content with their own."
    },

    // Accused + Understanding + Different IP types
    {
        "User Goal": "Understand if there's an issue to deal with",
        "IP Type": "Trade mark (registered)",
        "Situation": "accused",
        "Guide Text": "I received a letter claiming my business name infringes on a registered trade mark. I need to understand if this is valid and what my options are. Include any information about your own registered IP rights and any prior relationship with the complainant."
    },
    {
        "User Goal": "Understand if there's an issue to deal with",
        "IP Type": "Patent",
        "Situation": "accused",
        "Guide Text": "I've been notified that my product may infringe someone's patent. I'm not familiar with the patent they're referencing. Include any information about your product's international distribution and whether you have any IP rights of your own."
    },
    {
        "User Goal": "Understand if there's an issue to deal with",
        "IP Type": "Copyright",
        "Situation": "accused",
        "Guide Text": "I received a takedown notice claiming my online content infringes copyright. I believe my work is original. Include any information about your previous interactions with the complainant and whether your work contains any third-party materials."
    },

    // Protection + Strengthen + Different IP types
    {
        "User Goal": "Strengthen my position",
        "IP Type": "Trade mark (registered)",
        "Situation": "protection",
        "Guide Text": "I have a registered trade mark that's central to my business, and I want to ensure it's fully protected as we expand internationally. Include any information about similar marks in target markets and your planned online presence."
    },
    {
        "User Goal": "Strengthen my position",
        "IP Type": "Patent",
        "Situation": "protection",
        "Guide Text": "I've been granted a patent for my innovation and want to ensure it's strongly protected before approaching manufacturers. Include any information about international aspects and similar patents that might exist."
    },
    {
        "User Goal": "Strengthen my position",
        "IP Type": "Copyright",
        "Situation": "protection",
        "Guide Text": "I create digital content that's frequently copied online. I want to strengthen my copyright protection strategy. Include any information about the platforms where your content appears and any existing licensing arrangements."
    },

    // Conflict + Professional Support + Different IP types
    {
        "User Goal": "Get support from a professional",
        "IP Type": "Trade mark (registered)",
        "Situation": "conflict",
        "Guide Text": "I've discovered a potential conflict between my registered trade mark and another company's recent application. I need professional guidance. Include any information about communications with the applicant and whether there are territorial aspects to consider."
    },
    {
        "User Goal": "Get support from a professional",
        "IP Type": "Patent",
        "Situation": "conflict",
        "Guide Text": "There's an overlap between my patent application and an existing patent I recently discovered. I need expert advice on how to proceed. Include any information about your relationship with the patent holder and any international filings to consider."
    },
    {
        "User Goal": "Get support from a professional",
        "IP Type": "Copyright",
        "Situation": "conflict",
        "Guide Text": "I've found myself in a copyright dispute with a collaborator over content we created together. I need professional support to resolve this. Include any information about existing agreements regarding IP ownership and the nature of your professional relationship."
    },

    // Challenge + Agreement + Different IP types
    {
        "User Goal": "Explore ways to reach agreement with someone",
        "IP Type": "Trade mark (registered)",
        "Situation": "challenge",
        "Guide Text": "I believe a recently registered trade mark overlaps with my business's common-law rights. I'd like to find a mutual agreement rather than formal opposition. Include any information about your business relationship with the other party and any geographical distinctions that might be relevant."
    },
    {
        "User Goal": "Explore ways to reach agreement with someone",
        "IP Type": "Patent",
        "Situation": "challenge",
        "Guide Text": "I have concerns about the breadth of a competitor's patent that might impact my industry. I'd prefer to reach an understanding rather than formal challenge. Include any information about your previous dealings with this competitor and any technical distinctions that might be relevant."
    },
    {
        "User Goal": "Explore ways to reach agreement with someone",
        "IP Type": "Copyright",
        "Situation": "challenge",
        "Guide Text": "Someone has claimed copyright over material I believe should be in the public domain. I want to resolve this collaboratively. Include any information about your previous interactions with the claiming party and whether there are licensing options to explore."
    }
];

        // IP Enforcement Options Data (full set from CSV, without Response Type)
const ipOptionsData = [
       {
        "Overtitle": "Patent opposition",
        "Main Title": "Challenge a new or amended patent",
        "Description": "Initiate a challenge to the validity of a new patent with IP Australia",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Patent"
    },
    {
        "Overtitle": "Patent re-examination",
        "Main Title": "Challenge a granted patent",
        "Description": "Request a re-examination with IP Australia, to revoke or amend a granted patent",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Patent"
    },
    {
        "Overtitle": "Court - Patent",
        "Main Title": "Seek binding, authoritative decisions",
        "Description": "Escalate a wide range of patent matters to court",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Patent"
    },
    {
        "Overtitle": "Trade mark opposition",
        "Main Title": "Challenge the registration of a trade mark",
        "Description": "Initiate a trade mark opposition process against a new trademark with IP Australia",
        "Response Type": "Enforcement",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Trade mark registration revocation",
        "Main Title": "Remove a trade mark from the register",
        "Description": "Let IP Australia know a recently registered trade mark should not have been registered",
        "Response Type": "Enforcement",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Trade mark non-use action",
        "Main Title": "Remove a trade mark from the register",
        "Description": "Request IP Australia removes a trade mark from the register for non-use",
        "Response Type": "Enforcement",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Court - Trade Mark",
        "Main Title": "Seek binding, authoritative decisions",
        "Description": "Escalate a wide range of trade mark matters to court",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Interim court injuction order",
        "Main Title": "Stop infringing activity immediately",
        "Description": "Lodge an interim injunction order through court",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "World IP Organisation (WIPO) ",
        "Main Title": "Resolve international disputes",
        "Description": "Seek dispute resolution through the WIPO Arbitration and Mediation Center",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Alternative dispute resolution (ADR)",
        "Main Title": "resolve conflicts with the help of experienced facilitators",
        "Description": "Understand more about the options in the ADR space.",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "ASBFEO",
        "Main Title": "Access help tailored to resolve business disputes",
        "Description": "Australia Small Business & Family Enterprise Ombudsman (ASBFEO).",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Mediation",
        "Main Title": "Resolve IP issues with the help of a third party",
        "Description": "Invite the other party to enter into mediation to agree to mutually acceptable agreement.",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Arbitration",
        "Main Title": "Resolve IP issues with the help of a third party",
        "Description": "Agree to be bound by the decision of a highly qualified third party assessment.",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Letter of demand",
        "Main Title": "Demand the other party stops infringing",
        "Description": "Send a letter to the infringing party notifying them of potential infringement.",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Informal contact",
        "Main Title": "Provide an opportunity to stop infringement",
        "Description": "Alert the alleged infringer of your registered rights to allow them to stop infringing.",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Informal contact",
        "Main Title": "Respond informally to accusations of IP infringement",
        "Description": "Let the accuser know about your circumstances.",
        "Response Type": "Accused",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Negotiation",
        "Main Title": "Agree to a commercial arrangement",
        "Description": "Work with an IP professional to come to an agreement with another party.",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Takedown request",
        "Main Title": "Stop infringement facilitated online",
        "Description": "Request infringing material is removed from online marketplaces and platforms.",
        "Response Type": "Enforcement",
        "Right it applies to": "Trade mark; Copyright"
    },
    {
        "Overtitle": "Report IP crime or safety concerns",
        "Main Title": "Prevent risks to public interest",
        "Description": "Inform Government about risks to public health, crime, counterfeiting, frauds & scams.",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Notice of Objection",
        "Main Title": "Stop infringing goods entering the country",
        "Description": "Lodge a notice of objection with the Australian Border Force.",
        "Response Type": "Enforcement; Proactive",
        "Right it applies to": "Trade mark; Copyright"
    },
    {
        "Overtitle": "IP attorney or lawyer",
        "Main Title": "Obtain legal advice on enforcement options",
        "Description": "Seek a qualified & experienced professional to provide specific, tailored advice.",
        "Response Type": "Enforcement; Proactive; Accused",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "International options",
        "Main Title": "Enforce your IP overseas",
        "Description": "Understand options relating to enforcing your IP overseas. ",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Monitor the situation",
        "Main Title": "Take no immediate action",
        "Description": "Strategically enforce your IP only when worthwhile.",
        "Response Type": "Enforcement; Accused",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Rebrand your business",
        "Main Title": "Avoid potential IP conflicts",
        "Description": "Strategically rebrand your business to avoid disputes.",
        "Response Type": "Enforcement",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "IP insurance",
        "Main Title": "Coverage against potential future infringement",
        "Description": "Protect yourself from certain costs involved in IP disputes",
        "Response Type": "Proactive",
        "Right it applies to": "Patents; Trade mark; Copyright"
    },
    {
        "Overtitle": "Domain Name Dispute (auDRP)",
        "Main Title": "Dispute a domain name that infringes your trade mark",
        "Description": "Dispute an .au domain name that may infringe an IP right",
        "Response Type": "Enforcement",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Domain Name Dispute (UDRP)",
        "Main Title": "Challenge the use of international domain name",
        "Description": "Dispute an international domain name that may infringe an IP right",
        "Response Type": "Enforcement",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Apply for a trade mark ",
        "Main Title": "Register your trade mark  ",
        "Description": "Strengthen your position as the registered owner of your trade mark in Australia",
        "Response Type": "Proactive; Enforcement",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Contact intermediaries",
        "Main Title": "Engage with product distributors",
        "Description": "Establish and maintain connections with suppliers, manufacturers, and resellers of your goods.",
        "Response Type": "Proactive; Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "IP audits",
        "Main Title": "Review your IP portfolio",
        "Description": "Understand and assess the health and enforceability of your IP.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Registration",
        "Main Title": "Register your trade mark",
        "Description": "Apply to register your trade mark with IP Australia.",
        "Response Type": "Proactive; Enforcement; Accused ",
        "Right it applies to": "Trade marks"
    },
    {
        "Overtitle": "IP licensing",
        "Main Title": "License your IP rights",
        "Description": "Let others use your trade mark under agreed terms.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Legislation",
        "Main Title": "Understand relevant laws",
        "Description": "Review the laws that protect and govern your trade mark rights.",
        "Response Type": "Proactive",
        "Right it applies to": "Trade marks"
    },
    {
        "Overtitle": "Monitoring service - TMs",
        "Main Title": "Monitor for infringement",
        "Description": "Get alerts when others use similar trade marks.",
        "Response Type": "Proactive",
        "Right it applies to": "Trade marks"
    },
    {
        "Overtitle": "Monitoring service - Designs",
        "Main Title": "Monitor for infringement",
        "Description": "Get alerts when others offer similar designs for sale.",
        "Response Type": "Proactive",
        "Right it applies to": "Designs"
    },
    {
        "Overtitle": "Inspector service",
        "Main Title": "Send inspectors to farms or nurseries",
        "Description": "Get alerts when others are growing your plant varieties without compensation",
        "Response Type": "Proactive",
        "Right it applies to": "PBR"
    },
    {
        "Overtitle": "In-house expertise",
        "Main Title": "Employ IP specialists",
        "Description": "Hire specialists to manage your business IP matters.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Customer awareness",
        "Main Title": "Educate your customers",
        "Description": "Help customers recognise and choose your brand above others.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Supply chain protection",
        "Main Title": "Monitor supply chains",
        "Description": "Identify key stakeholders in your product's supply chain to protect your interests.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Proactive strategy",
        "Main Title": "Plan offensive actions",
        "Description": "Implement proactive measures to protect your IP, including legal actions.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Defensive strategy",
        "Main Title": "Implement defensive measures",
        "Description": "Identify ways to protect your business without commencing legal action.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Market presence",
        "Main Title": "Use your IP actively",
        "Description": "Ensure your IP is actively used in the market to maintain rights.",
        "Response Type": "Proactive",
        "Right it applies to": "Trade marks"
    },
    {
        "Overtitle": "Online protection",
        "Main Title": "Register with brand platforms",
        "Description": "Strengthen your standing in online marketplaces like Amazon Brand Registry.",
        "Response Type": "Proactive",
        "Right it applies to": "Trade marks"
    },
    {
        "Overtitle": "Risk assessment",
        "Main Title": "Predict potential infringement",
        "Description": "Determine likely areas of IP infringement to strengthen your response plan.",
        "Response Type": "Proactive",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Register monitoring",
        "Main Title": "Track similar registrations",
        "Description": "Set up alerts when others try to register similar trade marks.",
        "Response Type": "Proactive",
        "Right it applies to": "Trade mark"
    },
    {
        "Overtitle": "Patent comparison",
        "Main Title": "Compare patent claims",
        "Description": "Evaluate similarities and differences between patent claims to assess scope and potential infringement.",
        "Response Type": "Proactive",
        "Right it applies to": "Patent"
    },
    {
        "Overtitle": "IP search",
        "Main Title": "Find and understand existing IP rights",
        "Description": "Discover existing IP rights that may impact your business decisions.",
        "Response Type": "Proactive",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "Portfolio expansion",
        "Main Title": "Apply for additional IP rights",
        "Description": "Extend your IP protection by securing additional rights in relevant categories.",
        "Response Type": "Proactive",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "Market entry assessment",
        "Main Title": "Request a freedom to operate search",
        "Description": "Determine if your product or service might infringe on existing IP rights.",
        "Response Type": "Proactive",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "IP audits",
        "Main Title": "Commission an IP rights audit",
        "Description": "Obtain a comprehensive assessment of your existing IP assets and protections.",
        "Response Type": "Proactive",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "Commercialisation",
        "Main Title": "Develop a strategy to make money from your IP",
        "Description": "Create an integrated plan to leverage your IP assets for business growth.",
        "Response Type": "Proactive",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "Negotiate a resolution",
        "Main Title": "Engage constructively with rights holders",
        "Description": "Make mutually beneficial deals with other IP rights owners.",
        "Response Type": "Accused",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "IP valuation",
        "Main Title": "Determine the value of IP",
        "Description": "Get professional assessment of the financial worth of specific intellectual property.",
        "Response Type": "Accused; Enforcement",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "IP assessment",
        "Main Title": "Gather detailed information",
        "Description": "Obtain expert insights about your specific IP situation and options.",
        "Response Type": "Proactive",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "Finding an IP professional",
        "Main Title": "Preparing for your IP professional consultation",
        "Description": "Make the most of initial meetings with IP professionals through proper preparation.",
        "Response Type": "Proactive; Accused; Enforcement",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "Ownership disputes",
        "Main Title": "Resolve ownership conflicts",
        "Description": "Negotiate solutions to IP ownership disputes with professional guidance.",
        "Response Type": "Proactive; Accused; Enforcement",
        "Right it applies to": "Patents; Designs"
    },
    {
        "Overtitle": "Check for spam",
        "Main Title": "Read their accusation carefully",
        "Description": "Consider their allegations and whether their contact letter seems legitimate",
        "Response Type": "Accused ",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Counterclaims",
        "Main Title": "File a counterclaim",
        "Description": "Consider if it's appropriate to take infringement action against the other party",
        "Response Type": "Accused",
        "Right it applies to": ""
    },
    {
        "Overtitle": "Review their IP",
        "Main Title": "Check the other party's IP",
        "Description": "Make sure they have valid IP and raise any issues with these",
        "Response Type": "Proactive; Accused",
        "Right it applies to": "All types"
    },
    {
        "Overtitle": "Designs certification",
        "Main Title": "Certify your registered design",
        "Description": "Make sure your registered design is fully protected against infringement",
        "Response Type": "Proactive; Enforcement",
        "Right it applies to": "Designs"
    },
    {
        "Overtitle": "Request designs examination",
        "Main Title": "Request examination of a registered design",
        "Description": "Ask IP Australia to assess someone's registered design for validity ",
        "Response Type": "Proactive; Accused",
        "Right it applies to": "Designs"
    },
    {
        "Overtitle": "Court - PBR",
        "Main Title": "Seek binding, authoritative decisions",
        "Description": "Take PBR infringement or violation of licensing terms to court",
        "Response Type": "Enforcement",
        "Right it applies to": "PBR"
    },
    {
        "Overtitle": "Farm saved seed",
        "Main Title": "Consider exemptions",
        "Description": "Check if you qualify for an exemption for items propagated on your farm",
        "Response Type": "Accused",
        "Right it applies to": "PBR"
    },
    {
        "Overtitle": "Licensing agreements",
        "Main Title": "Review licensing arrangements",
        "Description": "Check any existing licencing agreements to ensure you're complying",
        "Response Type": "Accused ",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "PBR contracts",
        "Main Title": "Set up propagation contracts",
        "Description": "Set up licencing terms for customers which assign royalties to propagation or non-propagation arrangments",
        "Response Type": "Proactive",
        "Right it applies to": "PBR"
    },
    {
        "Overtitle": "PBR rights extension",
        "Main Title": "Extend your PBR rights",
        "Description": "Claim further PBR rights over certain harvested materials, dependent and essentially derived varieties",
        "Response Type": "Enforcement",
        "Right it applies to": "PBR"
    },
    {
        "Overtitle": "Court - Designs",
        "Main Title": "Seek binding, authoritative decisions",
        "Description": "Enforce your certified designs right through the court system",
        "Response Type": "Enforcement",
        "Right it applies to": "Designs"
    },
    {
        "Overtitle": "PBR grant objections",
        "Main Title": "Object to a PBR",
        "Description": "Object to the granting of a PBR with IP Australia",
        "Response Type": "Enforcement",
        "Right it applies to": "PBR"
    },
    {
        "Overtitle": "Unjust threats",
        "Main Title": "Take action against unjust threats",
        "Description": "Take another party to court for making ungrounded accusions of infringement",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Stop infringing activity",
        "Main Title": "Cease using the IP",
        "Description": "Stop using the IP you're accused of infringing ",
        "Response Type": "Accused",
        "Right it applies to": "Any"
    },
    {
        "Overtitle": "Contact intermediaries",
        "Main Title": "Alert your supply chain to issues",
        "Description": "Ask intermediaries to cease enabling infringement",
        "Response Type": "Enforcement",
        "Right it applies to": "Any"
    }
  
];

        // DOM Elements
        document.addEventListener('DOMContentLoaded', function() {
            const situationForm = document.getElementById('situationForm');
            const promptContainer = document.getElementById('promptContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            const resultsGrid = document.getElementById('resultsGrid');
            const editDescriptionBtn = document.getElementById('editDescription');
            const backButton = document.getElementById('backButton');
            const situationFilter = document.getElementById('situationFilter');
            const focusFilter = document.getElementById('focusFilter');
            const ipTypeFilter = document.getElementById('ipTypeFilter');
            const guideTextContainer = document.getElementById('guideTextContainer');
            const guideText = document.getElementById('guideText');
            const descriptionInput = document.getElementById('description');
            
            // Edit description button
            editDescriptionBtn.addEventListener('click', function() {
                promptContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
            });
            
            // Back button
            backButton.addEventListener('click', function() {
                promptContainer.style.display = 'block';
                resultsContainer.style.display = 'none';
            });
            
            // Filter change events - now with relevancy calculation
            situationFilter.addEventListener('change', function() {
                calculateRelevancy();
            });
            
            focusFilter.addEventListener('change', function() {
                calculateRelevancy();
            });
            
            ipTypeFilter.addEventListener('change', function() {
                calculateRelevancy();
            });
            
            // Description input change for relevancy calculation
            document.getElementById('userDescription').addEventListener('input', function() {
                calculateRelevancy();
            });
            
            // Handle input changes for guide text updates
            document.getElementById('situation').addEventListener('change', updateGuideText);
            document.getElementById('focus').addEventListener('change', updateGuideText);
            document.getElementById('ipType').addEventListener('change', updateGuideText);
            
            // Form submit event
            situationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                showResults();
            });
            
// Function to update guide text
function updateGuideText() {
    const situationSelect = document.getElementById('situation');
    const focusSelect = document.getElementById('focus');
    const ipTypeSelect = document.getElementById('ipType');
    
    const situationValue = situationSelect.value;
    const focusValue = focusSelect.value;
    const ipTypeValue = ipTypeSelect.value;
    
    // Map focus dropdown values to User Goal values
    const focusToGoalMap = {
        'understand': 'Understand if there\'s an issue to deal with',
        'strengthen': 'Strengthen my position',
        'support': 'Get support from a professional',
        'agreement': 'Explore ways to reach agreement with someone',
        'prevent_harm': 'Prevent harm to the public',
        'prevent_infringement': 'Prevent a potential infringement',
        'recoup': 'Recoup financial losses from another party'
    };
    
    const userGoal = focusToGoalMap[focusValue];
    
    // Only show guide text if all three selections are made
    if (situationValue && focusValue && ipTypeValue) {
        // Find matching guide text
        let matchingGuideText = guideTextData.find(item => 
            item["Situation"] === situationValue &&
            item["User Goal"] === userGoal && 
            item["IP Type"] === ipTypeValue
        );
        
        // Update the guide text - if no exact match, find a close match
        if (matchingGuideText) {
            guideText.textContent = matchingGuideText["Guide Text"];
            guideTextContainer.classList.add('active');
            document.getElementById('description').placeholder = matchingGuideText["Guide Text"];
        } else {
            // Try to find a match with just the User Goal and IP Type
            matchingGuideText = guideTextData.find(item => 
                item["User Goal"] === userGoal && 
                item["IP Type"] === ipTypeValue
            );
            
            if (matchingGuideText) {
                guideText.textContent = matchingGuideText["Guide Text"];
                guideTextContainer.classList.add('active');
                document.getElementById('description').placeholder = matchingGuideText["Guide Text"];
            } else {
                // If still no match, show a generic message
                guideText.textContent = "No specific example available for this combination. Please describe your situation in detail.";
                guideTextContainer.classList.add('active');
                document.getElementById('description').placeholder = "Please describe your situation in detail.";
            }
        }
    } else {
        // If not all selections are made, hide or show default message
        guideText.textContent = "Select all options above to see relevant examples...";
        guideTextContainer.classList.remove('active');
        document.getElementById('description').placeholder = "This helps us show you content that may be more relevant.";
    }
}

// Add event listeners to all three select elements
document.getElementById('situation').addEventListener('change', updateGuideText);
document.getElementById('focus').addEventListener('change', updateGuideText);
document.getElementById('ipType').addEventListener('change', updateGuideText);
            
            // Function to show results page
            function showResults() {
                const situation = document.getElementById('situation').value;
                const focus = document.getElementById('focus').value;
                const ipType = document.getElementById('ipType').value;
                const description = document.getElementById('description').value;
                
                // Show results container, hide prompt container
                promptContainer.style.display = 'none';
                resultsContainer.style.display = 'block';
                
                // Set filters to match form values
                situationFilter.value = situation;
                focusFilter.value = focus;
                ipTypeFilter.value = ipType;
                
                // Display user description
                document.getElementById('userDescription').textContent = description || "No description provided.";
                
                // Generate results with relevancy
                calculateRelevancy();
                
                // Scroll to top
                window.scrollTo(0, 0);
            }
            
            // Function to calculate relevancy and generate results
            function calculateRelevancy() {
                // Get current filter values
                const situation = situationFilter.value;
                const focus = focusFilter.value;
                const ipType = ipTypeFilter.value;
                const description = document.getElementById('userDescription').textContent;
                
                // Map from dropdown value to data value
                const ipTypeMap = {
                    'Trade mark (registered)': 'Trade mark',
                    'Unregistered trade mark': 'Unregistered trade mark',
                    'Plant breeder': 'Plant breeder',
                    'Unsure': 'Any'
                };
                
                // Get the mapped value or use the original
                const mappedIpType = ipTypeMap[ipType] || ipType;
                
                // Filter options based on IP type
                const filteredOptions = ipOptionsData.filter(option => {
                    const rightTypes = option["Right it applies to"].split(';').map(type => type.trim());
                    return rightTypes.includes(mappedIpType) || rightTypes.includes("Any");
                });
                
                // Calculate relevancy score for each option
                filteredOptions.forEach(option => {
                    let score = 50; // Base score
                    
                    // IP type match increases score
                    const rightTypes = option["Right it applies to"].split(';').map(type => type.trim());
                    if (rightTypes.includes(mappedIpType)) {
                        score += 20;
                    }
                    
                    // Response type match increases score
                    const responseTypes = option["Response Type"].split(';').map(type => type.trim());
                    if (responseTypes.includes(mapSituationToResponseType(situation))) {
                        score += 15;
                    }
                    
                    // Match keywords in description to option title and description
                    if (description && description.length > 0) {
                        const descriptionWords = description.toLowerCase().split(/\s+/);
                        const optionText = (option["Main Title"] + " " + option.Description).toLowerCase();
                        
                        descriptionWords.forEach(word => {
                            if (word.length > 3 && optionText.includes(word)) {
                                score += 3;
                            }
                        });
                    }
                    
                    // Add a little randomness to make it seem more dynamic
                    score += Math.floor(Math.random() * 10);
                    
                    // Cap score at 100
                    score = Math.min(score, 100);
                    
                    // Assign relevancy score to option
                    option.relevancyScore = score;
                });
                
                // Sort by relevancy score (highest first)
                filteredOptions.sort((a, b) => b.relevancyScore - a.relevancyScore);
                
                // Clear previous results
                resultsGrid.innerHTML = '';
                
                // Create cards for each filtered option
                filteredOptions.forEach((option, index) => {
                    const card = createCard(option);
                    card.style.animationDelay = `${index * 0.05}s`;
                    card.classList.add('card-animated');
                    resultsGrid.appendChild(card);
                });
                
                // If no results, show a message
                if (filteredOptions.length === 0) {
                    const noResults = document.createElement('div');
                    noResults.className = 'card';
                    noResults.innerHTML = `
                        <h3 class="card-title">No options found</h3>
                        <p>We couldn't find any specific options matching your criteria. Try adjusting your filters.</p>
                    `;
                    resultsGrid.appendChild(noResults);
                }
            }
            
            // Helper function to map situation to response type
            function mapSituationToResponseType(situation) {
                switch(situation) {
                    case 'accused': return 'Accused';
                    case 'infringement': return 'Enforcement';
                    case 'protection': return 'Proactive';
                    case 'conflict': return 'Enforcement';
                    case 'challenge': return 'Enforcement';
                    default: return 'Proactive';
                }
            }
            
        // Function to create a card element for an IP option
        function createCard(option) {
            // Get primary right type for card styling
            const primaryRightType = option["Right it applies to"].split(';')[0].trim();
            const cardClass = `card card-${primaryRightType.replace(/\s+/g, '-')}`;
            
            const card = document.createElement('div');
            card.className = cardClass;
            
            // Determine tag classes based on right it applies to
            const rightTypes = option["Right it applies to"].split(';').map(type => type.trim());
            const tagHtml = rightTypes.map(type => 
                `<span class="feature-tag tag-${type.replace(/\s+/g, '-')}">${type}</span>`
            ).join('');
            
            // Create card HTML with relevancy score
            card.innerHTML = `
                <div class="relevancy-score">${option.relevancyScore}% relevant</div>
                <div class="card-overtitle">${option.Overtitle}</div>
                <h3 class="card-title">${option["Main Title"]}</h3>
                <p>${option.Description}</p>
                <div class="card-tags">
                    ${tagHtml}
                </div>
            `;
            
            return card;
        }
        });
    </script>
</body>
</html>
